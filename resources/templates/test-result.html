<html>
    <head>
        {{{cspBlob}}}
        <style>
            {{{cssBlob}}}
        </style>
    </head>

    <body>
        <div class="container">
            {{#if testResult.testResults}}
            <div class="row">
                <div class="py-2">
                    {{{ check_test_status testResult.status testResult.logs }}}
                </div>
            </div>
            <div class="row">
                {{{ progress_bar testResult.testResults}}}
            </div>
            {{#each testResult.testResults}}

            <div class="row {{#if this.successful}}passed{{else}}failed{{/if}} my-2">
                <div class="col">
                    <div class="row">
                        {{#if this.successful}}
                        <div class="col-md-1 passed-header">
                            PASS:
                        </div>
                        {{else}}
                        <div class="col-md-1 failed-header">
                            FAIL:
                        </div>
                        {{/if}}
                        <div class="col-md">
                            <span>{{this.name}}</span>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <pre>{{this.message}}</pre>
                        </div>
                    </div>
                </div>
            </div>
            <!-- close row passed or failed -->
            {{/each}} {{else}} {{{ check_test_status testResult.status testResult.logs tmcLogs }}}
            {{/if}}
            <!-- close if testResulsts array empty -->
        </div>
        <!-- close container -->
        <script>
            const vscode = acquireVsCodeApi();
            const exerciseId = {{id}};

            function submitToServer() {
                vscode.postMessage({ type: 'submitToServer', data: { exerciseId: exerciseId } });
            }
        </script>
    </body>
</html>
